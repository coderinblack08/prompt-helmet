<!DOCTYPE html>
<html>
  <head>
    <title>Particle Motion Simulation</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: #000;
      }
      canvas {
        display: block;
      }
      .controls {
        position: fixed;
        top: 10px;
        left: 10px;
        color: white;
        font-family: Arial, sans-serif;
      }
    </style>
  </head>
  <body>
    <canvas id="particleCanvas"></canvas>
    <div class="controls">
      <div>Time: <span id="timeDisplay">0.00</span>s</div>
      <div>Position: (<span id="positionDisplay">0, 0</span>)</div>
      <div>Speed: <span id="speedDisplay">0</span></div>
    </div>
    <script>
      const canvas = document.getElementById("particleCanvas");
      const ctx = canvas.getContext("2d");

      // Make canvas fullscreen
      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();

      // Parameters
      const k = 0.5; // strength of potential
      const m = 1; // mass of particle
      const d = 100; // initial distance from origin
      const v = 50; // initial speed
      const dt = 0.016; // time step (roughly 60 FPS)

      // Initial conditions
      let x = d;
      let y = 0;
      let vx = 0;
      let vy = v;
      let t = 0;

      // Scale factor for visualization
      const scale = 2;

      // Trail array to show particle path
      const trail = [];
      const maxTrailLength = 1000;

      function updateParticle() {
        // Calculate acceleration from force (F = -grad U)
        const ax = (k * x) / m; // Note: positive k because we negated it in the force
        const ay = (k * y) / m;

        // Update velocities (semi-implicit Euler)
        vx += ax * dt;
        vy += ay * dt;

        // Update positions
        x += vx * dt;
        y += vy * dt;

        // Update time
        t += dt;

        // Update trail
        trail.push({ x, y });
        if (trail.length > maxTrailLength) {
          trail.shift();
        }

        // Update display values
        document.getElementById("timeDisplay").textContent = t.toFixed(2);
        document.getElementById("positionDisplay").textContent = `${x.toFixed(
          1
        )}, ${y.toFixed(1)}`;
        document.getElementById("speedDisplay").textContent = Math.sqrt(
          vx * vx + vy * vy
        ).toFixed(1);
      }

      function draw() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Transform to center coordinates
        ctx.save();
        ctx.translate(canvas.width / 2, canvas.height / 2);

        // Draw coordinate axes
        ctx.strokeStyle = "#333";
        ctx.beginPath();
        ctx.moveTo(-canvas.width / 2, 0);
        ctx.lineTo(canvas.width / 2, 0);
        ctx.moveTo(0, -canvas.height / 2);
        ctx.lineTo(0, canvas.height / 2);
        ctx.stroke();

        // Draw trail
        ctx.beginPath();
        ctx.strokeStyle = "#4CAF50";
        for (let i = 0; i < trail.length; i++) {
          const pos = trail[i];
          if (i === 0) {
            ctx.moveTo(pos.x * scale, pos.y * scale);
          } else {
            ctx.lineTo(pos.x * scale, pos.y * scale);
          }
        }
        ctx.stroke();

        // Draw current particle position
        ctx.fillStyle = "#ff4444";
        ctx.beginPath();
        ctx.arc(x * scale, y * scale, 5, 0, Math.PI * 2);
        ctx.fill();

        ctx.restore();
      }

      function animate() {
        updateParticle();
        draw();
        requestAnimationFrame(animate);
      }

      animate();
    </script>
  </body>
</html>
